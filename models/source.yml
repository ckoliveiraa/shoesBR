version: 2

sources:
  - name: staging
    database: aulapos
    schema: staging
    tables:
      - name: clientes
        description: "Tabela de clientes do e-commerce de sapatos"
        columns:
          - name: customer_id
            description: "Identificador único do cliente"
            tests:
              - unique
              - not_null
          - name: name
            description: "Nome do cliente"
          - name: address
            description: "Endereço do cliente"
          - name: phone
            description: "Número de telefone do cliente"
          - name: email
            description: "E-mail do cliente"

      - name: produtos
        description: "Tabela de produtos do e-commerce de sapatos"
        columns:
          - name: product_id
            description: "Identificador único do produto"
            tests:
              - unique
              - not_null
          - name: name
            description: "Nome do produto"
          - name: price
            description: "Preço do produto"

      - name: vendas
        description: "Tabela de vendas do e-commerce de sapatos"
        columns:
          - name: purchase_id
            description: "Identificador único da compra"
            tests:
              - unique
              - not_null
          - name: customer_id
            description: "Identificador do cliente"
            tests:
              - relationships:
                  to: source('staging', 'clientes')
                  field: customer_id
          - name: product_id
            description: "Identificador do produto"
            tests:
              - relationships:
                  to: source('staging', 'produtos')
                  field: product_id
          - name: date
            description: "Data da compra"
          - name: quantity
            description: "Quantidade de produtos comprados"
          - name: total_price
            description: "Preço total da compra"
          - name: payment_method
            description: "Método de pagamento utilizado"
